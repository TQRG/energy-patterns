- name: Dark UI Colors
  description: Provide a dark UI color theme to save battery on devices with AMOLED screens.
  context: Screen is one of the major source of power consumption on mobile devices. Apps that require heavy usage of screen (e.g., reading apps) can have a big impact on battery life.
  solution: Provide a UI with dark background colors. This is particularly beneficial for mobile devices with AMOLED screens, which are more energy efficient when displaying dark colors. In some cases, it might be reasonable to allow users to choose between a light and a dark theme. The dark theme can also be activated using a special trigger (e.g., when battery is running low).
  example: In a reading app, provide a theme with a dark background using light colors to display text. When compared to themes using light backgrounds, a dark background will have a higher number of dark pixels.
  figure: dark_ui_colors_2.svg
  occurrences_android:
    issues:
      - https://github.com/rdoeffinger/Dictionary/issues/43
      - https://github.com/bitcoin-wallet/bitcoin-wallet/issues/338
      - https://github.com/mikifus/padland/issues/4
      - https://github.com/TeamAmaze/AmazeFileManager/issues/336
      - https://github.com/vishesh/sealnote/issues/47
      - https://github.com/Wilm0r/giggity/issues/42
      - https://github.com/AntennaPod/AntennaPod/issues/1881
      - https://github.com/m0ppers/ElpeEfpeAndroid/issues/3
      - https://github.com/artetxem/mitzuli/issues/26
      - https://github.com/nextcloud/news-android/issues/512
      - https://github.com/Yubico/yubioath-android/issues/49
      - https://github.com/rosenpin-deprecated/More-For-GO/issues/23
      - https://github.com/signalapp/Signal-Android/issues/5470
      - https://github.com/vector-im/riot-android/issues/507
      - https://github.com/k3b/APhotoManager/issues/14
      - https://github.com/nbossard/packlist/issues/53
      - https://github.com/dmfs/opentasks/issues/4
      - https://github.com/SecUSo/privacy-friendly-sudoku/issues/8
      - https://github.com/mpcjanssen/simpletask-android/issues/694
      - https://github.com/vishesh/sealnote/issues/47
      - https://github.com/yeriomin/YalpStore/issues/10
      - https://github.com/Etuldan/spaRSS/issues/34
      - https://github.com/douzifly/clear-todolist/issues/3
      - https://github.com/daneren2005/Subsonic/issues/121
    commits:
      - https://github.com/ligi/SurvivalManual/commit/3b7c3b33ac6562878cd2ac628b9f33c64670a6d3
      - https://github.com/markusfisch/ShaderEditor/commit/27628f615cf97688f40f601c0ea315bb60f0db91
      - https://github.com/yeriomin/YalpStore/commit/34b5f82e8a1093d8a1cc5ca669ff435d65643625
    pull_requests:
      - https://github.com/rfc2822/GfxTablet/pull/73
  occurrences_ios:
    issues:
      - https://github.com/ChatSecure/ChatSecure-iOS/issues/31
      - https://github.com/mapsme/omim/issues/3903
  references:
    - authors: Agolli T, Pollock L, Clause J.
      title: Investigating decreasing energy usage in mobile apps via indistinguishable color changes.
      url: http://ieeexplore.ieee.org/abstract/document/7972715/
    - authors: Linares-Vásquez M, Bernal-Cárdenas C, Bavota G, Oliveto R, Di Penta M, Poshyvanyk D.
      title: "GEMMA: multi-objective optimization of energy consumption of GUIs in Android apps."
      url: http://ieeexplore.ieee.org/abstract/document/7965245/
    - authors: Ding Li, Angelica Huyen Tran, and William G. J. Halfond
      title: Making Web Applications More Energy Efficient for OLED Smartphones
      url: https://dl.acm.org/citation.cfm?id=2568321
    - title: "Nyx: A Display Energy Optimizer for Mobile Web Apps"
      authors: Ding Li, Angelica Huyen Tran, and William G. J. Halfond.

- name: Dynamic Retry Delay
  figure: dynamic_retry_delay.svg
  description: Whenever an attempt to access a resource has failed, increase the interval of time waited before asking access to that same resource.
  context: The mobile app has some features that require collecting data from other resources (e.g., update information from server). However, in same cases if the resource is unavailable, the app will unnecessarily try to connect the resource for a number of times, leading to unnecessary power consumption.
  solution: Increase update interval after each failed connection. It can be either a linear or exponential growth. Update interval can be reset upon a successful connection or a given change in the context (e.g., network status)).
  occurrences_android:
    issues:
      - https://github.com/deltachat/deltachat-android/issues/186
      - https://github.com/nextcloud/android/issues/1561
      - https://github.com/vector-im/riot-android/issues/882
      - https://github.com/kenkendk/android-bluez-ime/issues/62
      - https://github.com/klassm/andFHEM/issues/444
      - https://github.com/wireapp/wire-ios/issues/1626
      - https://github.com/Evolution-App/iOS/issues/89
    commits:
      - https://github.com/mpcjanssen/simpletask-android/commit/1b674be880439bb176c285509efbd96629270f70
      - https://github.com/k9mail/k-9/commit/86f3b28f79509d1a4d613eb39f60603e08579ea3
      - https://github.com/jamienicol/episodes/commit/e004294d1b2a4d05c49157f1ddec32c0071345a5
  occurrences_ios:
    pull_requests:
      - https://github.com/wordpress-mobile/WordPress-iOS/pull/7226
    commits:
      - https://github.com/wordpress-mobile/WordPress-iOS/commit/b879d00ebd5b4d3cfb554aea472da52dbab5e333

- name: Avoid Extraneous Work
  description: Avoid performing tasks that are not visible/valuable to the user and/or quickly become obsolete.
  context: Mobile apps have to perform a number of tasks simultaneously. There are cases in which the result of those tasks is not visible (e.g., the UI is presenting other pieces of information), or the result is not necessarily relevant to the user. This is particularly critical when apps go to the background. Since the data quickly becomes obsolete, the phone is using resources unnecessarily.
  solution: Select a concise set of data that should be presented to the user and enable/disable update and processing tasks depending on their effect on the data that is visible or valuable to the user.
  example: Consider a time series plot that needs to display real-time data. The plot has to be constantly updated — if the user scrolls down a UI view and the plot becomes hidden, the app should cease drawing operations related with the plot.
  occurrences_android:
    issues:
      - https://github.com/deltachat/deltachat-android/issues/186
      - https://github.com/osmandapp/Osmand/issues/2869
      - https://github.com/vector-im/riot-android/issues/1807
      - https://github.com/vector-im/riot-android/issues/1848
      - https://github.com/ukanth/afwall/issues/649
      - https://github.com/QuantumBadger/RedReader/issues/204
      - https://github.com/openbmap/radiocells-scanner-android/issues/175
      - https://github.com/SecUSo/privacy-friendly-sudoku/issues/8
      - https://github.com/ubergeek42/weechat-android/issues/73
      - https://github.com/freeotp/freeotp-android/issues/24
      - https://github.com/klassm/andFHEM/issues/1183
    commits:
      - https://github.com/greenaddress/GreenBits/commit/e16925c2231a0f8ef82636b3f7df9b69316ab53a
      - https://github.com/greenaddress/GreenBits/commit/1d5da879a71da8060d5ad6a784d318f7f0c63515
      - https://github.com/osmandapp/Osmand/commit/59c8b5d39cf2c0361d6f688d75e19f2786a4cbae
      - https://github.com/chaitan94/RedReader/commit/a774cab934ce24a5fa028e65841ab71523f5ed2c
      - https://github.com/mpcjanssen/simpletask-android/commit/13b615b26b0fe05be1ac6330d02b116d604b4a6a
      - https://github.com/Zanshinmu/Wifi-Fixer/commit/049fc6f740b2d6a6da20e85271f1a1f6a9a841e8
      - https://github.com/shadowsocks/shadowsocks-android/commit/8dcfd5a8c5afca445ea21eaaea962c01e5c63eb5
      - https://github.com/klassm/andFHEM/commit/612a9010544d602b1e60da92c0c5af1cc155159b
      - https://github.com/klassm/andFHEM/commit/05a2e63a51c5f75651451ce8f336c84d0dbfca32
    pull_requests:
      - https://github.com/vitas/beaconloc/pull/13
      - https://github.com/redfish64/TinyTravelTracker/pull/59
      - https://github.com/ccrama/Slide/pull/2347
  occurrences_ios:
    pull_requests:
      - https://github.com/LocativeHQ/Locative-iOS/pull/45
      - https://github.com/istornz/iPokeGo/pull/113
      - https://github.com/toggl/mobileapp/pull/1418
      - https://github.com/keybase/client/pull/8017
    issues:
      - https://github.com/owntracks/ios/issues/367
      - https://github.com/FokkeZB/Tracker/issues/4
      - https://github.com/mapsme/omim/issues/3694
    commits:
      - https://github.com/anurodhp/Monal/commit/06047f09bb95353944b35a10d2665457cbde1fa7
      - https://github.com/jeroensmeets/mastodon-app/commit/1819cfb3ffaebbeeee2db27417c8ac9b2bf3ceb2
  references:
    - title: Energy Efficiency Guide for iOS Apps – Avoid Extraneous Graphics and Animations
      url: https://developer.apple.com/library/archive/documentation/Performance/Conceptual/EnergyGuide-iOS/AvoidExtraneousGraphicsAndAnimations.html
      authors: Apple Developer Documention Archive

- name: Race-to-idle
  related:
    - Open Only When Necessary
  description: Release resources or services as soon as possible (e.g., wakelocks, screen).
  context: Mobile apps use a number of resources that can be manually closed after use. While active, these resources are ready to respond to requests from the app and require extra power consumption.
  solution: Make sure resources are inactive when they are not necessary by manually closing them.
  example: Implement handlers for events that are fired when the app goes to background, and release wake locks accordingly.
  references:
    - title: Understanding and Detecting Wake Lock Misuses for Android Applications
      url: https://doi.org/10.1145/2950290.2950297
      authors: Yepang Liu, Chang Xu, Shing-Chi Cheung, and Valerio Terragni
    - title: Automated Re-factoring of Android Apps to Enhance Energy-efficiency
      url: https://doi.org/10.1109/MobileSoft.2016.038
      authors: Abhijeet Banerjee, Abhik Roychoudhury
      year: 2016
    - title: Performance-based Guidelines for Energy Efficient Mobile Applications
      authors: Luis Cruz and Rui Abreu
      url: https://doi.org/10.1109/MOBILESoft.2017.19
      year: 2017
    - title: "What is keeping my phone awake?: characterizing and detecting no-sleep energy bugs in smartphone apps"
      authors: Abhinav Pathak Purdue, Abhilash Jindal Purdue, Y. Charlie Hu Purdue, and Samuel P. Midkiff Purdue
      url: https://doi.org/10.1145/2307636.2307661
  occurrences_android:
    issues:
      - https://github.com/osmandapp/Osmand/issues/3727
      - https://github.com/andstatus/andstatus/issues/467
      - https://github.com/ctodobom/OpenNoteScanner/issues/87
      - https://github.com/TwidereProject/Twidere-Android/issues/935
      - https://github.com/deltachat/deltachat-android/issues/104
      - https://github.com/tananaev/traccar-client-android/issues/128
      - https://github.com/tananaev/traccar-client-android/issues/11
      - https://github.com/badaix/snapcast/issues/82
      - https://github.com/jannispinter/jaws/issues/4
      - https://github.com/geometer/FBReaderJ/issues/162
      - https://github.com/PaulWoitaschek/Voice/issues/490
      - https://github.com/openbmap/radiocells-scanner-android/issues/105
      - https://github.com/mozilla/MozStumbler/issues/1069
      - https://github.com/telecapoland/jamendo-android/issues/38
    commits:
      - https://github.com/deltachat/deltachat-android/commit/ba1b5211a2167809c7b92cad64f2a65247669f0a
      - https://github.com/vanilla-music/vanilla/commit/0e60e51128519f1d44ceaa204b592b62595f81e2
      - https://github.com/LibreShift/red-moon/commit/12fdc2fe2785468b9c6b426a499004479d2d383d
      - https://github.com/M66B/NetGuard/commit/223de55f58484101cde7629dca810acdff5d785f
      - https://github.com/M66B/NetGuard/commit/fd614bcbd7738ef9f3179ce5a2fb2efe2c05defb
      - https://github.com/GrahamBlanshard/WiseRadar/commit/7c35abb8512bb89b65750175e4ab07c26a813677
      - https://github.com/daneren2005/Subsonic/commit/8ac7e0f2fec8f1ba475696b4d1bf2d7065eae2f9
      - https://github.com/shadowsocks/shadowsocks-android/commit/418ae2151c62d7ab352e15d942669cec82fdb923
    pull_requests:
      - https://github.com/redfish64/TinyTravelTracker/pull/58
      - https://github.com/ccrama/Slide/pull/2345
      - https://github.com/lllllT/AtmosphereLogger/pull/3
      - https://github.com/greenaddress/GreenBits/pull/199
      - https://github.com/mozilla/MozStumbler/pull/1074
  occurrences_ios:
    issues:
      - https://github.com/LocativeHQ/Locative-iOS/issues/50
      - https://github.com/mapsme/omim/issues/5110
    commits:
      - https://github.com/videolan/vlc/commit/2d099490eefa3cebc22279d00791b9d1d7c0b2ba
    pull_requests:
       - https://github.com/toshiapp/toshi-ios-client/pull/803
       - https://github.com/toggl/mobileapp/pull/1418

- name: Open Only When Necessary
  related:
    - Race-to-idle
  description: Open/start resources/services only when they are strictly necessary.
  context: Some resources require to be manually opened before use. It might be tempting to open necessary resources at the beginning of some task (e.g., upon the creation of an activity). However, resources will be actively waiting for requests, and consequently spending more energy.
  solution: Open resources only when necessary. This also avoids activating resources that will never be used.
  example: In a mobile app for video calls, only start capturing video at the moment that it will be displayed to the user.
  occurrences_android:
    issues:
      - https://github.com/cSploit/android/issues/396
    commits:
      - https://github.com/signalapp/Signal-Android/commit/cb9f225f5962d399f48b65d5f855e11f146cbbcb
      - https://github.com/shadowsocks/shadowsocks-android/commit/418ae2151c62d7ab352e15d942669cec82fdb923
  occurrences_ios:
    issues:
      - https://github.com/mapsme/omim/issues/7223
      - https://github.com/traccar/traccar-client-ios/issues/64
    commits:
      - https://github.com/vector-im/riot-ios/commit/1d8be86358c8114396c5320a869e24d0bf3985d9
    pull_requests:
      - https://github.com/toshiapp/toshi-ios-client/pull/68
  references:
    - title: Automated Re-factoring of Android Apps to Enhance Energy-efficiency
      url: https://doi.org/10.1109/MobileSoft.2016.038
      authors: Abhijeet Banerjee, Abhik Roychoudhury
      year: 2016

- name: Push Over Poll
  figure: push_not_poll.svg
  description: Use push notifications to receive updates from resources, instead of actively querying resources (i.e., polling).
  context: Mobile apps need to get updates from resources (e.g., from server). One way of checking for updates is by periodically query those resources. However, this will lead to several requests that will return no update, leading to unnecessary energy consumption.
  solution: Use push notifications to get updates from resources. Note -- this is a big challenge amongst FOSS apps since there is no good open source alternative for Firebase Cloud Messaging (former Google Cloud Messaging).
  example: In a messaging app, instead of actively check for new messages, the app can subscribe push notifications.
  occurrences_android:
    issues:
      - https://github.com/deltachat/deltachat-android/issues/186
      - https://github.com/nextcloud/android/issues/1654
      - https://github.com/bailuk/AAT/issues/12
      - https://github.com/commons-app/apps-android-commons/issues/871
      - https://github.com/vector-im/riot-android/issues/616
      - https://github.com/vector-im/riot-android/issues/1117
      - https://github.com/vector-im/riot-android/issues/994
      - https://github.com/criticalmaps/criticalmaps-android/issues/93
      - https://github.com/servalproject/batphone/issues/106
      - https://github.com/redsolution/xabber-android/issues/529
      - https://github.com/openbmap/radiocells-scanner-android/issues/166
      - https://github.com/signalapp/Signal-Android/issues/1187
      - https://github.com/glesik/wifireminders/issues/5
  occurrences_ios:
    issues:
      - https://github.com/ChatSecure/ChatSecure-iOS/issues/533
      - https://github.com/anurodhp/Monal/issues/5
      - https://github.com/jeroensmeets/mastodon-app/issues/8
  references:
    - title: The State of Mobile XMPP in 2016
      authors: Daniel Gultsch
      url: https://gultsch.de/xmpp_2016.html
    - title: GSoC - Alternative Push Notification Transport
      year: 2018
      url: https://github.com/matrix-org/GSoC/blob/master/IDEAS.md#alternative-push-notification-transport

- name: Power Save Mode
  figure: power_save_mode.svg
  related:
    - Power Awareness
  description: Provide an energy efficient mode in which user experience can drop for the sake of better energy usage.
  context: Whenever the device battery is running low, users want to avoid losing connectivity before they reach a power charging station. If the device shuts down, users might miss important calls or will not be able to do an important task. Still, apps might be running unimportant tasks that will reduce battery life in this critical context.
  solution: The app provides a power save mode in which it uses less resources while providing the minimum functionality that is indispensable to the user. It can be activated manually or upon some power events (e.g., when battery reaches a given level). User experience can drop for the sake of energy efficiency. Note, this is enforced in iOS for some use cases if the apps use the BackgroundSync APIs.
  example: Deactivate some features, reduce update intervals, or deactivate animated effects in the UI.
  occurrences_android:
    issues:
      - https://github.com/markusfisch/ShaderEditor/commit/6f278fb920072f85c6fc23a30724127b99333a7f
      - https://github.com/AnySoftKeyboard/AnySoftKeyboard/issues/463
      - https://github.com/mozilla/MozStumbler/issues/1109
      - https://github.com/mozilla/MozStumbler/issues/1069
    commits:
      - https://github.com/nextcloud/android/commit/8bc432027e0d33e8043cf40192203203a40ca29c
      - https://github.com/nextcloud/android/commit/ef7900a6a470469e2bce57b1458747dd9053afd1
      - https://github.com/markusfisch/ShaderEditor/commit/27628f615cf97688f40f601c0ea315bb60f0db91
      - https://github.com/00-Evan/shattered-pixel-dungeon/commit/debbb570662343b5a74b11057d1b67d257e6f95f
      - https://github.com/syncthing/syncthing-android/commit/ea8621cfc37349997f1c5b5ee250b42423c4c26a
      - https://github.com/syncthing/syncthing-android/commit/8463c194163f0d24bf2ac5b5cfe3531474381113
      - https://github.com/syncthing/syncthing-android/commit/c1d5bcc4cdb02eb40ab60030f304515682ba4ba3
      - https://github.com/bitcoin-wallet/bitcoin-wallet/commit/d6714de9ce2b22749ccb794509016b0aac9c0480
      - https://github.com/MarcelJurtz/LifeCounter/commit/508f991ea9b065d65314aa560635c45e42431668
      - https://github.com/proninyaroslav/libretorrent/commit/c48bc2714555f50c01654dfed3dbcbfa1d3ef1b6
      - https://github.com/samuelclay/NewsBlur/commit/8468a1c7c591376dbaea69fcf614dd6eb8450c92
      - https://github.com/openfoodfacts/openfoodfacts-androidapp/commit/dd5e4650579a24950333815b435119ff031654a0
      - https://github.com/openbmap/radiocells-scanner-android/commit/cd8c6835f2a74b7e2723ff0589cb401ce8b141c9
      - https://github.com/M66B/NetGuard/commit/2d36e908e111144afa23278b4fcf9869cc6cfae9
      - https://github.com/M66B/NetGuard/commit/2e70a038970d6efe9f74e5719e7648f91de30498
      - https://github.com/mozilla/MozStumbler/commit/b09b2f8334f5005fb81132d6f403854feefc35e0
      - https://github.com/mozilla/MozStumbler/commit/6ea026894de111a0e8c374c69a5521ac15d1179e
      - https://github.com/mridang/microchip/commit/592c2cafd5bc4519cdcaa0a81aaac3e98dd808f6
      - https://github.com/mridang/gasflow/commit/12b231abbb7ce7fd0e7bd9f403655b1d1079de45
      - https://github.com/hrydgard/ppsspp/commit/372798e16c9bb4e2fa493ab2729ce48299d96f7d
  occurrences_ios:
    issues:
      - https://github.com/ChatSecure/ChatSecure-iOS/issues/31
      - https://github.com/owntracks/ios/issues/436
      - https://github.com/mapsme/omim/issues/3391
    commits:
      - https://github.com/hrydgard/ppsspp/commit/372798e16c9bb4e2fa493ab2729ce48299d96f7d
      - https://github.com/shu223/iOS-9-Sampler/commit/dda0c41929351a780cbbef6ba62eb3232aa6ffed
  references:
    - title: Energy Efficiency Guide for iOS Apps – React to Low Power Mode on iPhones
      url: https://developer.apple.com/library/archive/documentation/Performance/Conceptual/EnergyGuide-iOS/LowPowerMode.html
      authors: Apple Developer Documention Archive

- name: Power Awareness
  related:
    - Power Save Mode
  description: Have a different behavior when device is connected/disconnected to a power station, or has different battery levels.
  context: There are some features that are not strictly necessary to users although they improve user experience (e.g., UI animations). Moreover, there are operations that do not have high priority and do not need to execute immediately (e.g., backup data in the cloud).
  solution: Enable or disable tasks or features according to power status. Since when the device is connected to power, the battery might still be running low, it might be advisable to wait until a pre-defined battery level is reached (or the power save mode is deactivated).
  example: Delay intensive operations such as cloud syncing or image processing until the device is connected to a charger.
  warning: According to https://github.com/nextcloud/ios/issues/22 this is only feasible for Android.
  occurrences_android:
    commits:
      - https://github.com/futurice/meeting-room-tablet/commit/cd716f9a09df7614d8ff1f5665d885aec9717116
      - https://github.com/mozilla/MozStumbler/commit/565008c1163a15655d35a4f15b6f83eb01a01036
      - https://github.com/mozilla/MozStumbler/commit/6b8dc2d19b129d4dbdbca18b2d20075c7aeefd9f
      - https://github.com/mozilla/MozStumbler/commit/464117dde4f4d9e706096be7426a798c601736f4
      - https://github.com/mozilla/MozStumbler/commit/fd88ba51601a577741e1e3ed5ae4f2c42d1b782b
      - https://github.com/mozilla/MozStumbler/commit/3e80b94e7b6f19d5320a46005dc8537c82416b83
      - https://github.com/einmalfel/PodListen/commit/58efebd8d9b30690cf4dab44794b94c9b4c9fc38
      - https://github.com/einmalfel/PodListen/commit/2ed5a655b1901f3c98d6837ecd17fa779688a9bc
      - https://github.com/Himmele/Quickdroid/commit/bc0e87457a87b6b5288356a98dd95f7337b6d760
      - https://github.com/Himmele/Quickdroid/commit/755f5cd23708bbdbe76fe50ee46412a1c15a9ab7
      - https://github.com/syncthing/syncthing-android/commit/c1d5bcc4cdb02eb40ab60030f304515682ba4ba3
      - https://github.com/bitcoin-wallet/bitcoin-wallet/commit/50f77c4ff25e80299a25a5bbd8742a3a1391e5f4
      - https://github.com/bitcoin-wallet/bitcoin-wallet/commit/cc7511bf5207f36ff7bd2fcf5cdb410bf041f05e
      - https://github.com/bitcoin-wallet/bitcoin-wallet/commit/9834af0a3970f02dad737d42b9ba0c719f9a29c6
      - https://github.com/bitcoin-wallet/bitcoin-wallet/commit/d6714de9ce2b22749ccb794509016b0aac9c0480
      - https://github.com/inorichi/tachiyomi/commit/b1b97c19d4311ccd2222dff8de26e9a499fe63e5
      - https://github.com/bottiger/SoundWaves/commit/9d6f91f17f555cf78bb439ad756ea63cad964f63
      - https://github.com/AntennaPod/AntennaPod/commit/1b9c96bc7664adeb12ffd0267c76a4667b25311f
      - https://github.com/tgwizard/sls/commit/0741384d6dc33c010ade3d5a2b9a77a186e99ad3
      - https://github.com/tgwizard/sls/commit/3d17aa5e142fd24a0f420571d6d10eb086a46d77
    issues:
      - https://github.com/thasmin/Podax/issues/122
      - https://github.com/mozilla/MozStumbler/issues/1175
      - https://github.com/mozilla/MozStumbler/issues/41
      - https://github.com/nextcloud/android/issues/1803
      - https://github.com/haiwen/seadroid/issues/604
      - https://github.com/haiwen/seadroid/issues/270
      - https://github.com/syncthing/syncthing-android/issues/602
      - https://github.com/syncthing/syncthing-android/issues/511
      - https://github.com/splondike/polipoid/issues/3
      - https://github.com/jensstein/oandbackup/issues/131
      - https://github.com/mozilla/MozStumbler/issues/1305
      - https://github.com/google/ExoPlayer/issues/3040
      - https://github.com/tananaev/traccar-client-android/issues/308
    pull_requests:
      - https://github.com/mozilla/MozStumbler/pull/67
      - https://github.com/nextcloud/android/pull/1527
  occurrences_ios:
    issues:
      - https://github.com/ChatSecure/ChatSecure-iOS/commit/8f50bdd9e6c35742d96eea703b2f58051ca6784d
      - https://github.com/owntracks/ios/issues/467
      - https://github.com/owntracks/ios/issues/377
      - https://github.com/owncloud/ios/issues/271
    commits:
      - https://github.com/ChatSecure/ChatSecure-iOS/commit/8f50bdd9e6c35742d96eea703b2f58051ca6784d
      - https://github.com/mapsme/omim/commit/0fb80668de892062d349b9048cf5bd7541f94bcf
  references:
    - title: Android Developer Guides — Optimizing for Battery Life
      url: https://developer.android.com/topic/performance/power/index.html
    - url: https://dl.acm.org/citation.cfm?id=2901748
      title: "How android app developers manage power consumption?: an empirical study by mining power management commits"
      authors: Lingfeng Bao, David Lo, Xin Xia, Xinyu Wang, and Cong Tian

- name: Reduce Size
  description: When transmitting data, reduce its size as much as possible.
  figure: reduce_size.svg
  context: Data transmition is a common operation in mobile apps. However, such operations are energy greedy and the time of transmission should reduced as much as possible.
  solution: Exchange only what is strictly necessary, avoiding sending unnecessary data. Use data compression when possible.
  example: When performing HTTP requests use gzip content encoding to compress data.
  occurrences_android:
    commits:
      - https://github.com/shadowsocks/shadowsocks-android/commit/6bff4f1a441ee83dca7f71da5f062c80fcc24681
    issues:
      - https://github.com/mozilla/MozStumbler/issues/406
      - https://github.com/mozilla-mobile/focus-android/issues/2003
  references:
    - url: https://stackoverflow.com/questions/3065920/is-gzip-compression-useful-for-mobile-devices
      title: Is gzip compression useful for mobile devices?
      authors: Stackoverflow.
    - title: Reducing battery consumption of data polling and pushing techniques on Android using GZip
      url: http://ieeexplore.ieee.org/document/7409011/
      authors: Sirapat Boonkrong, Pham Cao Dinh

- name: WiFi Over Cellular
  figure: wifi.svg
  related:
    - Power Awareness
  description: Delay or disable heavy data connections until the device is connected to a WiFi network.
  context: Data needs to be syncronized with a server but it is not urgent and can be delayed.
  solution: Data connections using cellular networks are usually more battery intensive than connections using WiFi. Low priority operations that require a data connection to exchange considerable amounts of data should be delayed until a WiFi connection is available.
  example: Consider a mobile app to organize photos that allows users to backup their photos in a cloud server. Use an API to check the availability of a WiFi connection and postpone cloud synchronizing in case it cannot be reached.
  occurrences_android:
    issues:
      - https://github.com/nextcloud/android/issues/1626
      - https://github.com/nextcloud/android/issues/1105
      - https://github.com/nextcloud/android/issues/844
      - https://github.com/haiwen/seadroid/issues/270
      - https://github.com/syncthing/syncthing-android/issues/549
      - https://github.com/syncthing/syncthing-android/issues/511
      - https://github.com/ppareit/swiftp/issues/94
      - https://github.com/maxpower47/PinDroid/issues/31
      - https://github.com/drpout/boilr/issues/243
      - https://github.com/Etuldan/spaRSS/issues/27
      - https://github.com/mozilla/MozStumbler/issues/1466
    commits:
      - https://github.com/Telegram-FOSS-Team/Telegram-FOSS/commit/644fc7ccea9deee3686dc9c824893baa4ce4bef6
      - https://github.com/proninyaroslav/libretorrent/commit/c48bc2714555f50c01654dfed3dbcbfa1d3ef1b6
  occurrences_ios:
    issues:
      - https://github.com/owncloud/ios/issues/271
    pull_requests:
      - https://github.com/istornz/iPokeGo/pull/296
  references:
    - title: Does Wi-Fi Consume More Battery Power Than 3G or 4G/LTE?
      authors: Mitch Bartlett
      url: https://www.technipages.com/does-wi-fi-consume-more-battery-power-than-3g-or-4glte
    - title: Modifying your Download Patterns Based on the Connectivity Type
      url: https://developer.android.com/training/efficient-downloads/connectivity_patterns.html
      authors: Android SDK Documentation
    - title: Energy Efficiency Guide for iOS Apps – Energy and Networking
      url: https://developer.apple.com/library/archive/documentation/Performance/Conceptual/EnergyGuide-iOS/EnergyandNetworking.html
      authors: Apple Developer Documention Archive
    - title: "What is eating up battery life on my SmartPhone: A case study"
      url: https://doi.org/10.1109/ICEAC.2012.6471003
      authors: Grace Metri, Abhishek Agrawal, Ramesh Peri, and Weisong Shi


- name: Suppress Logs
  related:
    - Avoid Extraneous Work
  description: Avoid using intensive logging (< 1Hz).
  context: Developers resort to logging in their mobile apps to ensure their correct behavior and simplify bug reporting. However, logging operations are creating overhead on energy consumption without creating value to the end user.
  solution: Avoid using intensive logging, and keeping rates below one message per second.
  example: Disable logging when processing real-time data. If necessary enable only during debugging executions.
  occurrences_android:
    commits:
      - https://github.com/LibreShift/red-moon/commit/8bbc87dddad608d4c1cd17025100f6e6a971c39b
      - https://github.com/Freeyourgadget/Gadgetbridge/commit/c06ef3d260a8785b567743d51edcba8803195365
      - https://github.com/M66B/NetGuard/commit/2d36e908e111144afa23278b4fcf9869cc6cfae9
      - https://github.com/M66B/NetGuard/commit/2e70a038970d6efe9f74e5719e7648f91de30498
      - https://github.com/hrydgard/ppsspp/commit/372798e16c9bb4e2fa493ab2729ce48299d96f7d
    issues:
      - https://github.com/mozilla/MozStumbler/issues/1357
    pull_requests:
      - https://github.com/M66B/NetGuard/pull/505
  occurrences_ios:
    commits:
      - https://github.com/ptsochantaris/trailer/commit/6e83eb82fbdf8a9049817c7a1cb7dd2bf2520fba
  references:
    - title: An exploratory study on assessing the energy impact of logging on Android applications
      authors: Shaiful Chowdhury, Silvia Di Nardo, Abram Hindle, Zhen Ming (Jack) Jiang
      url: https://link.springer.com/article/10.1007/s10664-017-9545-x
      position: Not necessary when logs are generated at rates of ≤ 1 message per second

- name: Batch Operations
  aka: Lazy First — Coalesce, Inexact Schedulling
  description: Batch multiple operations instead of putting the device into an active state many times.
  figure: batch_operations.svg
  context: 1) Background tasks can be expensive. A given task needs to be eventually executed, but it does not need to be executed at a specific time. 2) Executing operations separately might lead to tail energy consumptions.
  solution: Bundle multiple operations in a single one.
  example: "Use Job Scheduling APIs (e.g., `android.app.job.JobScheduler`, Firebase JobDispatcher) that manage multiple background tasks occurring in a device. These APIs will guarantee that the device will exit when there is a reasonable amount of work to do. It combines several multiple tasks to prevent the device from constantly exiting sleep mode (or doze mode). Other examples: execute only if another task is using the required resource; ask for location while setting 'notification responsiveness' with a reasonable delay; try to collect location data when other apps are collecting it as well."
  occurrences_android:
    issues:
      - https://github.com/Freeyourgadget/Gadgetbridge/issues/379
      - https://github.com/k9mail/k-9/issues/2295
      - https://github.com/k9mail/k-9/issues/1577
      - https://github.com/mozilla/MozStumbler/issues/1435
      - https://github.com/google/ExoPlayer/issues/2083
      - https://github.com/ZeeRooo/MaterialFBook/issues/57
      - https://github.com/mozilla/MozStumbler/issues/1466
    commits:
      - https://github.com/QuantumBadger/RedReader/commit/9cd375c374e8754d7ec021ea197a962be4d4fd9b
      - https://github.com/QuantumBadger/RedReader/commit/bae362a07f649dac39617a9ad748de86e0944dc2
      - https://github.com/ccrama/Slide/commit/070c2c6f1faf56bb486acb25fae1b9cc63c10702
      - https://github.com/ge0rg/yaxim/commit/5544bed1ad30ab489d5854eeb380a6718132826e
      - https://github.com/TheFakeMontyOnTheRun/knightsofalentejo/commit/e9406ef60df1e8b2c843859d3f52b797c3b0d9d1
      - https://github.com/fixme-lausanne/MyHackerspace/commit/37221fccbced3af90984fa6ce5a5da8b7b551121
      - https://github.com/spacecowboy/NotePad/commit/4184f949e1baf41547fd8181d89b59368c15f257
    pull_requests:
      - https://github.com/mozilla/MozStumbler/pull/1251
      - https://github.com/mozilla/MozStumbler/pull/737
      - https://github.com/mozilla/MozStumbler/pull/413
  occurrences_ios:
    commits:
      - https://github.com/videolan/vlc/commit/7655d6c889d2425c1fd4615f7e2692df1a47470c
  references:
    - title: An Investigation into Energy-Saving Programming Practices for Android Smartphone App Development
      url: https://doi.org/10.1145/2593743.2593750
      authors: Ding Li and William G. J. Halfond
    - title: Optimizing for Doze and App Standby
      url: https://developer.android.com/training/monitoring-device-state/doze-standby.html
      authors: Android SDK Documentation
    - title: Android Developer Guides — Optimizing for Battery Life
      url: https://developer.android.com/topic/performance/power/index.html
      authors: Android SDK Documentation
    - title: "DevBytes: Efficient Data Transfers - Batching, Bundling, and SyncAdapters"
      url: https://www.youtube.com/watch?v=5onKZcJyJwI
      authors: Android Developers Youtube Channel.
    - title: Energy-aware performance evaluation of Android custom kernels
      url: https://doi.org/10.1109/GREENS.2015.8
      authors: Luis Corral, Anton B. Georgiev, Andrea Janes, and Stefan Kofler
      year: 2015
    - title: "DelayDroid: Reducing Tail-Time Energy by Refactoring Android Apps"
      authors: Huaqian Cai, Ying Zhang, Zhi Jin, Xuanzhe Liu, and Gang Huang
      url: https://doi.org/10.1145/2875913.2875915


- name: Cache
  aka: Lazy First — reduce
  description: Avoid performing unnecessary operations by using cache mechanisms.
  context: Typically mobile apps present data to users that is collect from a remote server. However, it may happen that the same data is being collected from the server multiple times.
  solution: Implement caching mechanisms to temporarily store data from server. In addition, verify whether there is an update before downloading all data.
  example: Consider a social network app that shows other users' profiles. Instead of downloading basic information and profile pictures every time a given profile is opened, use data that was locally stored from earlier visits.
  figure: cache.svg
  related:
    - Avoid Extraneous Work
    - Reduce size
  occurrences_android:
    issues:
      - https://github.com/bfabiszewski/ulogger-android/issues/8
      - https://github.com/redfish64/TinyTravelTracker/issues/49
      - https://github.com/fixme-lausanne/MyHackerspace/issues/33
    commits:
      - https://github.com/Freeyourgadget/Gadgetbridge/commit/d1a62968f69ebb7dd6dd7cb273a06aa0761681a4
      - https://github.com/00-Evan/shattered-pixel-dungeon/commit/5491f315f6080f6ce9883638c5a7339c19a14828
      - https://github.com/k9mail/k-9/commit/43c38a047feedda4720af5bfbc188a33f8dfaced
      - https://github.com/federicoiosue/Omni-Notes/commit/9fe9db8d20f6323589026830e68927d8ad5c30d9
      - https://github.com/federicoiosue/Omni-Notes/commit/bd3c96f2e87553a6c5d5b1a70e7e5d9b4565c20b
      - https://github.com/fixme-lausanne/MyHackerspace/commit/d71df9b3962afaf38301dcef7199466281e7e48e
      - https://github.com/shadowsocks/shadowsocks-android/commit/179aab80942fb258ded3714d14d1fa1716fddce2
    pull_requests:
      - https://github.com/bfabiszewski/ulogger-android/pull/20
      - https://github.com/tgwizard/sls/pull/340
  occurrences_ios:
    commits:
      - https://github.com/videolan/vlc/commit/6c643e6f18f93d79f7ff0f6f294d89f18e182fbb
    pull_requests:
      - https://github.com/mozilla-mobile/prox/pull/272
    issues:
      - https://github.com/istornz/iPokeGo/issues/222
      - https://github.com/wordpress-mobile/WordPress-iOS/issues/904
  references:
    - title: Optimizing for Battery Life
      url: https://developer.android.com/topic/performance/power/index.html
      authors: Android Developer Guides.
    - title: Saving Energy on Mobile Devices by Refactoring
      url: http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.567.383
      authors: Marion Gottschalk, Jan Jelschen, and Andreas Winter

- name: Decrease Rate
  related:
    - Enough resolution
  description: Increase time between syncs/sensor reads as much as possible.
  context: Mobile apps have to periodically perform operations. If a the time between two executions is small, the app will be executing operations more often. In some cases, even if operations are executed more often, it will not affect users' perception.
  solution:  Increase the delay between operations to find the minimal interval that do not compromise user experience. This delay can be manually tuned by developers or defined by users. More sophisticated solutions can also use context (e.g., time of the day, history data, etc.) to infer the optimal update rate.
  example: Consider a news app that collects news from different sources, each one having its own thread. Some news sources might have new content only once a week, while others might be updated every hour. Instead of updating all threads at the same rate, use data from previous updates to infer the optimal update rate of these threads. Connect to the news source only if new updates are expected.
  occurrences_android:
    issues:
      - https://github.com/opacapp/opacclient/issues/492
      - https://github.com/mvglasow/satstat/issues/140
      - https://github.com/tananaev/traccar-client-android/issues/135
      - https://github.com/tananaev/traccar-client-android/issues/128
      - https://github.com/tananaev/traccar-client-android/issues/58
      - https://github.com/tananaev/traccar-client-android/issues/12
      - https://github.com/tananaev/traccar-client-android/issues/308
      - https://github.com/servalproject/batphone/issues/20
      - https://github.com/google/ExoPlayer/issues/1140
      - https://github.com/drpout/boilr/issues/131
      - https://github.com/mozilla/MozStumbler/issues/1055
      - https://github.com/mozilla/MozStumbler/issues/21
      - https://github.com/lkorth/screen-notifications/issues/15
      - https://github.com/nbenm/ImapNote2/issues/12
      - https://github.com/tananaev/traccar-client-android/issues/288
      - https://github.com/hrydgard/ppsspp/issues/9046
    commits:
      - https://github.com/vector-im/riot-android/commit/14fdf5e69e8633f2736aea71be1820649f81c1df
      - https://github.com/QuantumBadger/RedReader/commit/9cd375c374e8754d7ec021ea197a962be4d4fd9b
      - https://github.com/OGRECave/ogre/commit/bb0763af64738504487fb94533d5682d361c8764
      - https://github.com/farmerbb/Taskbar/commit/ffd2d7fd676507219dbf0f3104ea50b35dd3c9ed
      - https://github.com/samuelclay/NewsBlur/commit/744ebd54a9014682999a21b665298e65a6a766ec
      - https://github.com/ankidroid/Anki-Android/commit/9193806eb0546bf8d7c040ad40272d632b4d3e99
      - https://github.com/fixme-lausanne/MyHackerspace/commit/d71df9b3962afaf38301dcef7199466281e7e48e
      - https://github.com/Berlin-Vegan/berlin-vegan-guide/commit/4eb4c6745584e7f7ac016a34f86838092ba244f3
      - https://github.com/samuelclay/NewsBlur/commit/71b746a48daa687fb94339d21fb5cd00bf229c2f
    pull_requests:
      - https://github.com/mozilla/MozStumbler/pull/264
      - https://github.com/mvglasow/satstat/pull/141
  occurrences_ios:
    commits:
      - https://github.com/videolan/vlc/commit/e76e8639d48f1b33e239082521c9e6319af86379
      - https://github.com/videolan/vlc/commit/7655d6c889d2425c1fd4615f7e2692df1a47470c
    issues:
      - https://github.com/mapsme/omim/issues/3090
      - https://github.com/traccar/traccar-client-ios/issues/47
      - https://github.com/standardnotes/mobile/issues/45
    pull_requests:
      - https://github.com/mapsme/omim/pull/7119
      - https://github.com/mapsme/omim/pull/6992
      - https://github.com/mapsme/omim/pull/995
      - https://github.com/istornz/iPokeGo/pull/113
      - https://github.com/keybase/client/pull/7032

- name: User Knows Best
  description: Allow users to enable/disable certain features in order to save energy.
  context: Energy efficiency solutions often provide a tradeoff between features and power consumption. However, this tradeoff is different for different users. I.e., some users might be okay with less features but better energy efficiency, and vice versa.
  solution: Allow users to customize their preferences regarding energy critical features. Since this might be more intuitive for power users, mobile apps should provide by optimal preferences by default for regular users.
  example: Consider a mail client for POP3 accounts as example. In some cases, users are not expecting any urgent message and are okay with checking for new mail in no less than 10 minutes for the sake of energy efficiency. On the other hand, there are cases in which users are waiting for urgent messages and would like to check for messages every two minutes. Since there is no automatic mechanism to infer the optimal update interval, the best option is to allow users to define it.
  occurrences_android:
    issues:
      - https://github.com/redfish64/TinyTravelTracker/issues/49
      - https://github.com/redfish64/TinyTravelTracker/issues/17
      - https://github.com/TeamNewPipe/NewPipe/issues/1096
      - https://github.com/TeamNewPipe/NewPipe/issues/1059
      - https://github.com/k9mail/k-9/issues/1563
      - https://github.com/HoraApps/LeafPic/issues/250
      - https://github.com/Etuldan/spaRSS/issues/27
      - https://github.com/signalapp/Signal-Android/issues/6391
      - https://github.com/openbmap/radiocells-scanner-android/issues/79
      - https://github.com/mozilla/MozStumbler/issues/1386
      - https://github.com/mozilla/MozStumbler/issues/353
      - https://github.com/eidottermihi/rpicheck/issues/131
      - https://github.com/cSploit/android/issues/229
      - https://github.com/hrydgard/ppsspp/issues/9046
      - https://github.com/thasmin/Podax/issues/122
    commits:
      - https://github.com/tasks/tasks/commit/bec96f8ce66fe35f8e6c0032f82ae21abb59bde6
      - https://github.com/proninyaroslav/libretorrent/commit/c48bc2714555f50c01654dfed3dbcbfa1d3ef1b6
      - https://github.com/proninyaroslav/libretorrent/commit/8dca82790bf631e913369027632924257dfe3ce4
      - https://github.com/redsolution/xabber-android/commit/616411e3790ba4e04cbc96ae9a24ce8ba49e1027
      - https://github.com/tgwizard/sls/commit/0741384d6dc33c010ade3d5a2b9a77a186e99ad3
      - https://github.com/mozilla/MozStumbler/commit/0f415d3bfec9168dbaf34172cd8c430eb5ef7dc5
      - https://github.com/mozilla/MozStumbler/commit/6672264de28560725a29ca7925a3452aaaa37477
      - https://github.com/mozilla/MozStumbler/commit/1797407a535911c0dc5a57e1e5a8d77c88f89f3a
      - https://github.com/mozilla/MozStumbler/commit/63122cfd7f255f9e72199eb3784901aa01204cc5
      - https://github.com/mozilla/MozStumbler/commit/6e3c81239183963e6e41009d45a55e37be26dc3d
      - https://github.com/mozilla/MozStumbler/commit/2132e036ab1edb234c723783d8c4b4939c57abbc
      - https://github.com/mozilla/MozStumbler/commit/4b4f96047a8e20a44e4359ce246231eba78f24fa
      - https://github.com/mozilla/MozStumbler/commit/40a29fb6c01e99350bdd19cdb9727be740dde4b5
      - https://github.com/einmalfel/PodListen/commit/2ed5a655b1901f3c98d6837ecd17fa779688a9bc
      - https://github.com/geometer/FBReaderJ/commit/87e6e7fad6d3189174d04b2060fcf1222289c863
    pull_requests:
      - https://github.com/mozilla/MozStumbler/pull/1706
      - https://github.com/mozilla/MozStumbler/pull/1419
      - https://github.com/mozilla/MozStumbler/pull/1261
  occurrences_ios:
    issues:
      - https://github.com/ChatSecure/ChatSecure-iOS/issues/483
      - https://github.com/owntracks/ios/issues/448
      - https://github.com/owntracks/ios/issues/436
      - https://github.com/owntracks/ios/issues/434
      - https://github.com/owntracks/ios/issues/234
      - https://github.com/mapsme/omim/issues/4346
      - https://github.com/traccar/traccar-client-ios/issues/52
      - https://github.com/traccar/traccar-client-ios/issues/40
      - https://github.com/standardnotes/mobile/issues/45
    commits:
      - https://github.com/ptsochantaris/trailer/commit/6e83eb82fbdf8a9049817c7a1cb7dd2bf2520fba
    pull_requests:
      - https://github.com/istornz/iPokeGo/pull/113
    references:
      title: The Impact of User Choice on Energy Consumption
      authors: Chenlei Zhang, Abram Hindle, and Daniel M. German
      url: https://doi.org/10.1109/MS.2014.27

- name: Inform Users
  figure: inform_users.svg
  description: Let the user know if the app is doing any battery intensive operation.
  context: There are specific use cases in mobile apps that can be energy greedy. On the other hand some features might be dropping user experience in order to improve energy efficiency. If users do not know what to expect from the mobile app, they might think it is not behaving correctly.
  solution: Let users know about battery intensive operations or energy management features. Properly flag this information in the user interface (e.g., alerts).
  example: Examples include alerting users when the saving power mode is active, and alerting when a battery intensive operation is executed.
  related:
    - User Knows Best
  occurrences_android:
    pull_requests:
      - https://github.com/mozilla/MozStumbler/pull/307
      - https://github.com/mozilla/MozStumbler/pull/262
      - https://github.com/abarisain/dmix/pull/416
    commits:
      - https://github.com/hrydgard/ppsspp/commit/27286d09499e0103e90c8b1f3e483834afc86786
      - https://github.com/hrydgard/ppsspp/commit/1f7a137926050deff4c05063f09275463c1cd2f4
      - https://github.com/caarmen/network-monitor/commit/e502952d5c7792df83446e08eea84c106f11ec5d
  occurrences_ios:
    issues:
      - https://github.com/mapsme/omim/issues/1883
    commits:
      - https://github.com/ptsochantaris/trailer/commit/6e83eb82fbdf8a9049817c7a1cb7dd2bf2520fba
      - https://github.com/hrydgard/ppsspp/commit/27286d09499e0103e90c8b1f3e483834afc86786
    pull_requests:
      - https://github.com/hrydgard/ppsspp/pull/9044

- name: Enough resolution
  description: Collect or provide high accuracy data only when strictly necessary.
  context: When collecting or displaying data, it is tempting to use high resolutions. The problem of using data with high resolution is that its collection and manipulation require more resources (e.g., memory, processing capacity, etc.). As a consequence, energy consumption increases unnecessarily.
  solution: For every use case, find the optimal resolution value that is required to provide the intended user experience.
  example: Consider a running app that is able to record running sessions. While  the user is running, the app presents the current overall distance in real-time. While calculating the most accurate value of the total distance would provide the correct information, it would require precise real-time processing of GPS or accelerometer sensors, which can be energy greedy. Instead, a lightweight method could be used to estimate this information with lower but reasonable accuracy. In the end of the session, the accurate results would still processed, but without real-time constraints.
  occurrences_android:
    issues:
      - https://github.com/vanilla-music/vanilla/issues/620
      - https://github.com/osmandapp/Osmand/issues/3556
      - https://github.com/redfish64/TinyTravelTracker/issues/60
      - https://github.com/redfish64/TinyTravelTracker/issues/52
      - https://github.com/mvglasow/satstat/issues/140
      - https://github.com/mozilla/MozStumbler/issues/21
      - https://github.com/khertan/ForRunners/issues/54
    commits:
      - https://github.com/00-Evan/shattered-pixel-dungeon/commit/debbb570662343b5a74b11057d1b67d257e6f95f
      - https://github.com/Berlin-Vegan/berlin-vegan-guide/commit/4eb4c6745584e7f7ac016a34f86838092ba244f3
    pull_requests:
      - https://github.com/mozilla/MozStumbler/pull/14
  occurrences_ios:
    issues:
      - https://github.com/owntracks/ios/issues/507
      - https://github.com/traccar/traccar-client-ios/issues/52
    commits:
      - https://github.com/wwdc-family/app/commit/09f0d8042721473b145ddb96ada83dc03b019a57
      - https://github.com/wwdc-family/app/commit/ccf9f48193db0f2e0433aecd2511220cb29d68a5
      - https://github.com/wwdc-family/app/issues/44
    pull_requests:
      - https://github.com/wwdc-family/app/pull/36
      - https://github.com/istornz/iPokeGo/pull/113

- name: Sensor Fusion
  related:
    - enough resolution
  description: Use data from low power sensors to infer whether new data needs to be collected from high power sensors
  context: Mobile apps provide features that require reading data or executing operations in different sensors or components. Such operations can be energy greedy, causing high power consumption. Thus, they should be called as less times as possible.
  solution: Use complementaray data low power sensors to assure whether a given energy-greedy operation needs to be executed.
  example: Use accelerometer to infer whether the user has changed location. In the case that the user is in the same location, data from GPS does not need to be updated.
  occurrences_android:
    issues:
      - https://github.com/tananaev/traccar-client-android/issues/288
      - https://github.com/mozilla/MozStumbler/issues/1108
      - https://github.com/mozilla/MozStumbler/issues/1664
      - https://github.com/mozilla/MozStumbler/issues/1394
      - https://github.com/mozilla/MozStumbler/issues/1290
      - https://github.com/mozilla/MozStumbler/issues/1107
      - https://github.com/mozilla/MozStumbler/issues/584
      - https://github.com/criticalmaps/criticalmaps-android/issues/116
      - https://github.com/Phantast/smartnavi/issues/15
    commits:
      - https://github.com/mozilla/MozStumbler/commit/fa3042a5cb6594e2acfe2744a9bc0a6c897f83db
      - https://github.com/velazcod/Tinfoil-Facebook/commit/15c75847d51d8385595958bbe2449e8c4ba65e1e
    pull_requests:
      - https://github.com/mozilla/MozStumbler/pull/1270
  occurrences_ios:
    commits:
      - https://github.com/mapsme/omim/commit/0fb80668de892062d349b9048cf5bd7541f94bcf
    issues:
      - https://github.com/wwdc-family/app/issues/44
      - https://github.com/nextcloud/ios/issues/324
  references:
    - title: Movement Detection for Power-Efficient Smartphone WLAN Localization
      url: https://www.cs.cmu.edu/afs/cs.cmu.edu/Web/People/ishafer/pubs/localization-mswim10.pdf
      authors: Ilari Shafer, Mark L. Chang.
    - title: CLLocationManager
      url: https://developer.apple.com/documentation/corelocation/cllocationmanager
      authors: Apple's Core Location Documentation

- name: Kill Abnormal Tasks
  description: Provide means of interrupting energy greedy operations (e.g., using timeouts, or users input).
  context: Mobile apps might feature operations that can be unexpectedly energy greedy (e.g., taking a long time to execute).
  solution: Provide a reasonable timeout for tasks or wakelocks. Alternatively provide an intuitive way of interrupting those tasks.
  example: In a mobile app that features an alarm clock, set a reasonable timeout for the duration of the alarm.. In case the user is not able to turn it off it will not drain the battery.
  occurrences_android:
    commits:
      - https://github.com/jroal/a2dpvolume/commit/7723d698b690b94e01380a4618cb55f700c724c3
      - https://github.com/daneren2005/Subsonic/commit/8ac7e0f2fec8f1ba475696b4d1bf2d7065eae2f9
      - https://github.com/klassm/andFHEM/commit/05a2e63a51c5f75651451ce8f336c84d0dbfca32
    issues:
      - https://github.com/kontalk/androidclient/issues/405
      - https://github.com/kraigs-android/kraigsandroid/issues/52
      - https://github.com/drpout/boilr/issues/140
      - https://github.com/frankmorgner/vsmartcard/issues/22
      - https://github.com/abarisain/dmix/issues/3
      - https://github.com/jensstein/oandbackup/issues/102
      - https://github.com/jensstein/oandbackup/issues/97
  occurrences_ios:
    pull_requests:
      - https://github.com/mozilla-mobile/firefox-ios/pull/2728

# - name: Rely on the OS FIXME (nome estranho)
#   related:
#     - Batch Operations
#   description: Avoid using your own implementation by relying on services already provided by the OS.
#   occurrences_android:
#     issues:
#       - https://github.com/hrydgard/ppsspp/issues/9046
#   occurrences_ios:
#     issues:
#       - https://github.com/owntracks/ios/issues/507
#       - https://github.com/ChatSecure/ChatSecure-iOS/issues/483
#       - https://github.com/owntracks/ios/issues/431
#       - https://github.com/owntracks/ios/issues/327
#       - https://github.com/owntracks/ios/issues/119
#       - https://github.com/owncloud/ios/issues/13
#       - https://github.com/expo/expo/issues/1750
#       - https://github.com/expo/expo/issues/1170


- name: No screen interaction
  related:
    - Race-to-idle
  description: Whenever possible allow interaction without using the display.
  context: There are apps that require a continuous usage of the screen. However, there are use cases in which the screen can be replaced by less power intensive alternatives.
  solution: Allow users to interact with the app using alternative interfaces (e.g., audio).
  example: In a navigation app, there are use cases in which users might be only using audio instructions and do not need the screen to be on all the time. This pattern is commonly adopted by audio players that use the the earphone buttons to play/pause or skip songs.
  occurrences_android:
    issues:
      - https://github.com/anthonycr/Lightning-Browser/issues/342
      - https://github.com/philliphsu/ClockPlus/issues/14
      - https://github.com/xbmc/Kore/issues/157
      - https://github.com/i-p-tel/sipdroid/issues/709
      - https://github.com/rosenpin-deprecated/More-For-GO/issues/23
      - https://github.com/signalapp/Signal-Android/issues/6258
      - https://github.com/ThibaudM/timelapse-sony/issues/14
    pull_requests:
      - https://github.com/inorichi/tachiyomi/pull/1177
  occurrences_ios:
   issues:
     - https://github.com/mapsme/omim/issues/930
     - https://github.com/signalapp/Signal-iOS/issues/854

#
# - name: Obsolete
#   description: remove properties that do not have any effect.
#   example: obsolete params in views
#   related:
#     - Avoid Extraneous Work
#   occurrences_android:
#     commits:
#       - https://github.com/grzegorznittner/chanu/commit/2640dc50ab8150341da30bc4d282f8ac8f5aa4c5
#     pull_requests:
#       - https://github.com/SecUSo/privacy-friendly-sudoku/pull/19
#       - https://github.com/vitas/beaconloc/pull/13
#       - https://github.com/redfish64/TinyTravelTracker/pull/59
#       - https://github.com/ccrama/Slide/pull/2347
#       - https://github.com/bfabiszewski/ulogger-android/pull/20
#       - https://github.com/vijai1996/screenrecorder/pull/16
#       - https://github.com/SecUSo/privacy-friendly-qr-scanner/pull/19
#       - https://github.com/ligi/SCR/pull/5
#       - https://github.com/klausw/hackerskeyboard/pull/540
#       - https://github.com/koelleChristian/trickytripper/pull/27
#       - https://github.com/Utyff/pMetro/pull/15
#       - https://github.com/Sensirion/SmartGadget-Android/pull/38
#       - https://github.com/greenaddress/GreenBits/pull/200
#
#
#
# - name: Infer instead of asking
#   description: Some data can be calculated by the phone instead of asking the server (E.g, Time since message was sent)
#   occurrences_android:
#     issues:
#       - https://github.com/kontalk/androidclient/issues/378
#
# - name: Offline mode
#   description: Allow users to download content upfront so that this information does not need to be downloaded each time and/or separately.
#   related:
#     - Lazy First (Reduce)
#     - Lazy First (Coalesce)
#   occurrences_android:
#     issues:
#       - https://github.com/hidroh/materialistic/issues/659
#       - https://github.com/nilsbraden/ttrss-reader-fork/issues/156
#
# - name: Offload heavy operations
#   description:
#   occurrences_android:
#     issues:
#       - https://github.com/SecUSo/privacy-friendly-sudoku/issues/8
#   occurrences_ios:
#     issues:
#       - https://github.com/keybase/client/issues/10510
#   references:
#     - title: Facilitating the Implementation of Adaptive Cloud Offloading to Improve the Energy Efficiency of Mobile Applications
#
- name: Avoid Extraneous Graphics and Animations
  related: enough resolution
  description: Graphics and animations are really important to improve user experience. However, they can also be battery intensive – use them with moderation.
  context: Mobile apps often feature impressive graphics and animations. However, they need to be properly tuned in order to prevent battery drain of users' devices. This is particularly critical in e-paper devices.
  solution: Study the importance of graphics and animations to the user experience. The improvement on user experience may not be sufficient to cover the overhead on energy consumption. Avoid using graphics animations or high quality graphics. Resort to low frame rates for animations when possible.
  example: A high frame rate may make sense during game play, but a lower frame rate may be sufficient for a menu screen. Use a high frame rate only when the user experience calls for it.
  warning: Particularly important on e-ink devices. TODO - Review 'Enough Resolution'.
  occurrences_android:
    commits:
      - https://github.com/freeotp/freeotp-android/commit/7f02f57572149f243be526788987aced6a6626ba
      - https://github.com/gateship-one/malp/commit/47914c186ada0f03d758b5d249e96e70fe51dfbf
    issues:
      - https://github.com/ankidroid/Anki-Android/issues/3022
      - https://github.com/HoraApps/LeafPic/issues/250
      - https://github.com/Etuldan/spaRSS/issues/11
      - https://github.com/aarddict/android/issues/28
      - https://github.com/libretro/RetroArch/issues/3138
      - https://github.com/mapsme/omim/issues/7563
      - https://github.com/mapsme/omim/issues/7117
      - https://github.com/google/ExoPlayer/issues/3843
      - https://github.com/google/ExoPlayer/issues/3477
  occurrences_ios:
    issues:
      - https://github.com/libretro/RetroArch/issues/5174
      - https://github.com/expo/expo/issues/538
    pull_requests:
      - https://github.com/mapsme/omim/pull/7119
      - https://github.com/mapsme/omim/pull/6992
      - https://github.com/mapsme/omim/pull/995
    commits:
      - https://github.com/mapsme/omim/commit/6551a4d11b40d2a1cdb8649a6ebdec3ee19a4cd6
      - https://github.com/mapsme/omim/commit/54968deac9dd8b3c62f5c0d6cdd5c4b1ee561d0c
      - https://github.com/mapsme/omim/commit/22272f5cd15ce1e9828ef2af15101c54f99a3669
  references:
    - title: Energy Efficiency Guide for iOS Apps – Avoid Extraneous Graphics and Animations
      url: https://developer.apple.com/library/archive/documentation/Performance/Conceptual/EnergyGuide-iOS/AvoidExtraneousGraphicsAndAnimations.html
      authors: Apple Developer Documention Archive
    - title: Content-centric energy management of mobile displays
      authors: Dongwon Kim, Nohyun Jung, Yohan Chon, and Hojung Cha
      url: https://doi.org/10.1109/TMC.2015.2467393
#
# - name: Schedulle and Sleep
#   description: use AlarmManager for updates, instead of using Wakelocks, Services.
#   related:
#     - Race-to-idle
#   occurrences_android:
#     issues:
#       - https://github.com/tananaev/traccar-client-android/issues/240
#       - https://github.com/tananaev/traccar-client-android/issues/11
#       - https://github.com/tananaev/traccar-client-android/issues/11
#       - https://github.com/indywidualny/FaceSlim/issues/212
#     pull_requests:
#       - https://github.com/klausw/hackerskeyboard/pull/539
#
- name: Manual Sync - On Demand
  related:
    - User Knows Best
  description: Perform tasks only when the user specifically asks.
  context: Some tasks can be energy intensive, but not strictly necessary for some use cases of the app.
  solution: Provide a mechanism in the UI (e.g., button) that allows users to trigger energy intensive tasks.
  example: In a beacon monitoring app, there are situations in which the user does not need to keep track of her/his beacons. Allow the user to start/stop monitoring manually.
  occurrences_android:
    issues:
      - https://github.com/drpout/boilr/issues/128
      - https://github.com/drpout/boilr/issues/131
      - https://github.com/redsolution/xabber-android/issues/174
      - https://github.com/mozilla-mobile/focus-android/issues/2003
  occurrences_ios:
    issues:
      - https://github.com/owntracks/ios/issues/434
      - https://github.com/owntracks/ios/issues/426
      - https://github.com/owncloud/ios/issues/511
      - https://github.com/FokkeZB/Tracker/issues/4
      - https://github.com/wireapp/wire-ios/issues/445
#
# - name: No Ads
#   occurrences_android:
#     issues:
#       - https://github.com/mozilla-mobile/focus-android/issues/2082
#
# - name: Play on demand
#   description: Do not automatically start playing media content.
#   context:
#     occurrences_android:
#       issues:
#         - https://github.com/mozilla-mobile/focus-android/issues/2003
#
# - name: Kill the battery optimizer (anti pattern)
#   description: Most battery optimizers are actually app killers. However, very often users are not aware of the implications of battery optimiers that are running on their devices. Thus, users assume that apps are misfunctioning due to their poor quality.
#   occurrences_android:
#     issues:
#       - https://github.com/siacs/Conversations/issues/2775
#       - https://github.com/siacs/Conversations/issues/1725
#       - https://github.com/Freeyourgadget/Gadgetbridge/issues/782
#       - https://github.com/Freeyourgadget/Gadgetbridge/issues/564
#       - https://github.com/julian-klode/dns66/issues/166
#       - https://github.com/romannurik/muzei/issues/207
#       - https://github.com/romannurik/muzei/issues/190
#       - https://github.com/michaelkourlas/voipms-sms-client/issues/137
#       - https://github.com/termux/termux-app/issues/377
#       - https://github.com/tananaev/traccar-client-android/issues/240
#       - https://github.com/LibreShift/red-moon/issues/213
#       - https://github.com/gsurrel/FacebookNotifications/issues/33
#       - https://github.com/erickok/transdroid/issues/417
#       - https://github.com/httpdispatch/MissedNotificationsReminder/issues/1
#       - https://github.com/khertan/ForRunners/issues/46
#     commits:
#       - https://github.com/siacs/Conversations/commit/d5608cb4f3bd357e46513a38b8f3676049992dcc
#       - https://github.com/siacs/Conversations/commit/e6a9829dd2b275f80231b19930fbb75b209f4c2e
#       - https://github.com/siacs/Conversations/commit/aa6955a0d687c0310d69658d0a68facb798daaf6
#       - https://github.com/siacs/Conversations/commit/c296d6f4466e2616432660bb01465f3746e1bb65
#       - https://github.com/quarck/CalendarNotification/commit/118d6802e539e10c0fabd0f968de8e57ed2446e0
#       - https://github.com/deltachat/deltachat-android/commit/e2225be331d4c041510b988d03f171b7532a1355
#       - https://github.com/deltachat/deltachat-android/commit/b941b9e21a2787308755f092ce92ca048bdbcd84
#       - https://github.com/syncthing/syncthing-android/commit/31721af0c3a00e4a9a2434e50f34
#       - https://github.com/syncthing/syncthing-android/commit/f005fcd1d2b0d197eab706a2d5a36520f7f2ff82
#       - https://github.com/jackpal/Android-Terminal-Emulator/commit/c40111ffeb3523cede1d76731901b7cb73c7dca0
#       - https://github.com/kontalk/androidclient/commit/391f01742ef8c618499ef6dd02d02b35b669d14d
#       - https://github.com/fython/Blackbulb/commit/aee784223b1860759381d269f9572bad01189607
#       - https://github.com/etesync/android/commit/d675fb961ea67b665c6e0ead3e6e84c9297a7d8c
#       - https://github.com/redsolution/xabber-android/commit/725be496fee04402685e1a129249414e0a6867f8
#       - https://github.com/httpdispatch/MissedNotificationsReminder/commit/09255c310dfd429c3e7907a284c054923c3fb814
#     pull_requests:
#       - https://github.com/microg/android_packages_apps_GmsCore/pull/197
#       - https://github.com/microg/android_packages_apps_UnifiedNlp/pull/100
#       - https://github.com/wiglenet/wigle-wifi-wardriving/pull/115
#   references:
#     - title: Optimizing for Doze and App Standby -— Acceptable Use Cases for Whitelisting
#       url: https://developer.android.com/training/monitoring-device-state/doze-standby.html#whitelisting-cases
#
# - name: Permanent notification (anti pattern)
#   occurrences_android:
#     issues:
#       - https://github.com/nextcloud/android/issues/2130
#       - https://github.com/redfish64/TinyTravelTracker/issues/54
#       - https://github.com/tgwizard/sls/issues/384
#
# - name: Kill the app FIXME (anti pattern?)
#   description: Provide users with means to easily kill the app. FIXME can we even consider this. it sounds like bad practice.
#   context: there is data connection but is low quality, which may result in battery drain for heavy data transfers.
#   occurrences_android:
#     issues:
#       - https://github.com/k9mail/k-9/issues/1066
#   references:
#     - title: Modifying your Download Patterns Based on the Connectivity Type FIXME
#       url: https://developer.android.com/training/efficient-downloads/connectivity_patterns.html
#     - title: Closing apps to save your battery only makes things worse
#       url:  https://www.wired.com/2016/03/closing-apps-save-battery-makes-things-worse/
